# CVE-APP Service 

A service that provides data for a demo application to provide CVE summaries


## Operating

This service is a java-15 spring-boot service

 - Build and test: `./gradlew build`

- Run it: `./gradlew bootRun`

### see it operating

URL example: `http://localhost:8080/cve/search?for=cherokee`

## Data sources 
This service pulls results from the nvd.nist.gov database of CVEs 

The API used returns results in batches, ordered by most recent, filtered by the keyword provided.

## Technologies used 
- gradle
- java 15
- spring-boot - web app container / runner
- junit 5 - unit test framework 
- hoverfly-java - http stub for independent component testing
- jackson + JsonPath for JSON manipulation 

## Would have loved to use
- checkstyle
- spring-boot WebClient (as RestTemplate is getting depricated)

## Design thoughts /  Principles applied
 - Outside in / 'service as unit' testing - using a stub to not
   rely on an external resource to allow tet automation to run
 - Avoids strongly coupling to the external API in the code - take what's needed
   without describing or coupling to anything  we don't. 
-  Also avoiding making the external domain the domain of the app

## Narration
As a general note, I've most recently spent my time working with Node.js services, so the 
technology choices here are somewhere between simple, obvious, and pragmatic.
I totally welcome learning better ways to do what that app needs to do.
Certainly in the area of Json - I'm sure there are more fluid and elegant uses of the libraries I selected. 

1. Used MockMvc as a lightweight way of testing the web app
2. Looked at using `gson` but moved to using `` and JsonPath as it made things simpler
3. After experimenting I favoured `RestTemplate` over `WebClient` in this app for simplicity / easy of use
4. Web based Tests are slow to run and there is growing logic. I introduced unit tests for the key complexity area, 
   but there might need to be a further migration
5. Processing of the upstream Json is just good enough. Its working too hard when passing between Jackson and JsonPath.
   As there is only ever a maximum of 20 items and this is a demo app its ok, but given more time I'd want to settle on 
   a more efficient processing model.
   
## should be done

1. Data from the external API should not be trusted. Though React offers a lot of protection by default, there is always
a possibility of HTML / javascript injection attacks. The data we consume should be sanitised and all HTML tags removed.
2. More test cases (and error handling) in data processing

## Nice to have
1. validate that there is not a lightweight way to use Jackson / JsonPath
2. add checkstyle or similar linter